<template>
  <el-container>
    <page-header :menuInfo='menuInfo'></page-header>
    <el-main>
      <router-view></router-view>
    </el-main>
  </el-container>
</template>

<script>
import pageHeader from '../components/common-header';
import fullPath from "@/router/full-path.js";
import { requestRouterList } from "@/common/remote/";
export default {
  name: "Admin",
  data() {
    return {
      menuInfo:null
    }
  },
  components: {pageHeader},
  computed: {
    // menuInfo() {
    //   // return this.menus[this.activityId] || {};
    //   const admin = fullPath.filter(item => item.name == "admin")[0];
    //   const menu = admin.children.map(e => ({
    //     // icon: `${e.meta&&e.meta.icon}`,
    //     // title: `${e.meta&&e.meta.title}`
    //     index: `/admin/${e.path}`,
    //     ...(e.meta || {})
    //   }));
    //   return {
    //     menu
    //   };
    // },
  },
    mounted() {
      requestRouterList({
      }).then(res => {
        let vm = this
        vm.init(res.data.list)
      });
  },
  methods:{
    init(_list){
      let vm = this
      function menuForma(_list){
        _list.map((item) => {
              item.path = item.menu_url;
              item.icon = item.image_url;
              delete item.menu_url
              delete item.image_url
              if(item.children){
                menuForma(item.children)
              }
        });
      }
      menuForma(_list)
      vm.menuInfo = _list
    }
  },
};
</script>
<style scoped>
.el-container {
    display: block;
}
.el-main {
    height: calc(100% - 90px);
}
</style>
